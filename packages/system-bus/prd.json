{
  "title": "Add formatLoopDuration utility function",
  "stories": [
    {
      "id": "DUR-1",
      "title": "Implement and export formatLoopDuration",
      "description": "Create the file src/inngest/functions/agent-loop/utils.ts and implement a pure function `formatLoopDuration(ms: number): string` that converts milliseconds into a human-readable duration string. The function should handle: sub-second values (500 → '0.5s'), exact seconds (5000 → '5s'), minutes and seconds (65000 → '1m 5s'), hours, minutes, and seconds (3661000 → '1h 1m 1s'), zero (0 → '0s'), and negative values (any negative number → '0s'). The function must be exported as a named export. No external dependencies — pure arithmetic and string formatting only.",
      "acceptance_criteria": [
        "File src/inngest/functions/agent-loop/utils.ts exists and exports a named function formatLoopDuration",
        "formatLoopDuration(0) returns '0s'",
        "formatLoopDuration(-100) returns '0s'",
        "formatLoopDuration(500) returns '0.5s'",
        "formatLoopDuration(5000) returns '5s'",
        "formatLoopDuration(65000) returns '1m 5s'",
        "formatLoopDuration(3661000) returns '1h 1m 1s'",
        "formatLoopDuration(1000) returns '1s'",
        "formatLoopDuration(60000) returns '1m 0s'",
        "formatLoopDuration(3600000) returns '1h 0m 0s'",
        "Function is pure with no side effects or external dependencies",
        "TypeScript compiles cleanly: bunx tsc --noEmit"
      ],
      "priority": 1,
      "passes": false
    }
  ]
}
